{% extends 'pystock_index.html' %}

{% block body %}
	<div class="container mt-4">
        <h2 class="mb-4">Stock List</h2>
        <form method="get" action="{% url 'pystock:stock_list' %}">
            <input type="text" name="q" placeholder="搜索股票" value="{{ query }}">
            <button type="submit">搜索</button>
        </form>

        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>TS Code</th>
                    <th>Symbol</th>
                    <th>Name</th>
                    <th>Area</th>
                    <th>Industry</th>
                    <th>Market</th>
                    <th>List Status</th>
                    <th>List Date</th>
                    <th>Is HS</th>
                </tr>
            </thead>
            <tbody>
                {% for stock in items %}
                <tr>
                    <td>{{ stock.ts_code }}</td>
                    <td>{{ stock.symbol }}</td>
                    <td>{{ stock.name }}</td>
                    <td>{{ stock.area }}</td>
                    <td>{{ stock.industry }}</td>
                    <td>{{ stock.market }}</td>
                    <td>{{ stock.list_status }}</td>
                    <td>{{ stock.list_date }}</td>
                    <td>{{ stock.is_hs }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <!-- 分页控件 -->
        <nav>
        <span>当前第 {{ items.number }} 页，共 {{ items.paginator.num_pages }} 页</span>
        <ul class="pagination">
        <li class="page-item">
            <a class="page-link" href="?page=1">第一页</a>
        </li> <!-- 添加“第一页”按钮 -->
            {% if items.has_previous %}
                <li class="page-item">
                    <a class="page-link" href="?page={{ items.previous_page_number }}">上一页</a>
                </li>
            {% endif %}

            {% for page_num in items.paginator.page_range %}
                {% if page_num >= items.number|add:-5 and page_num <= items.number|add:5 %}
                    {% if page_num == items.number %}
                        <li class="page-item active">
                            <a class="page-link">{{ page_num }}</a>
                        </li>
                    {% else %}
                        <li class="page-item">
                            <a class="page-link" href="?page={{ page_num }}">{{ page_num }}</a>
                        </li>
                    {% endif %}
                {% endif %}
            {% endfor %}

            {% if items.has_next %}
                <li class="page-item">
                    <a class="page-link" href="?page={{ items.next_page_number }}">下一页</a>
                </li>
            {% endif %}
            <li class="page-item">
                <a class="page-link" href="?page={{ page_obj.paginator.num_pages }}">最后一页</a> <!-- 添加“最后一页”按钮 -->
            </li>
        </ul>

    </nav>
    </div>
{% endblock %}



